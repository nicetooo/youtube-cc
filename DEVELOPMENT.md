# å¼€å‘å·¥ä½œæµç¨‹æŒ‡å—

## âš ï¸ é‡è¦è¯´æ˜

**`npm run dev` æ‰“å¼€çš„æµè§ˆå™¨æ˜¯ä¸´æ—¶çš„,ä¸è¦ä½¿ç”¨å®ƒ!**

WXT ä¼šæ‰“å¼€ä¸€ä¸ªç‹¬ç«‹çš„ Chrome å®ä¾‹,ä½†è¿™ä¸ªæµè§ˆå™¨æ˜¯ç©ºçš„,æ¯æ¬¡éƒ½ä¼šé‡ç½®ã€‚ä½ åº”è¯¥åœ¨**ä½ å¸¸ç”¨çš„ Chrome** ä¸­å¼€å‘ã€‚

---

## ğŸš€ æ­£ç¡®çš„å¼€å‘æµç¨‹

### ç¬¬ä¸€æ­¥: åœ¨å¸¸ç”¨ Chrome ä¸­åŠ è½½æ‰©å±•(ä¸€æ¬¡æ€§è®¾ç½®)

1. **æ„å»ºæ‰©å±•**
   ```bash
   npm run build
   ```

2. **åœ¨ä½ å¸¸ç”¨çš„ Chrome ä¸­åŠ è½½**
   - æ‰“å¼€ `chrome://extensions`
   - å¯ç”¨å³ä¸Šè§’çš„"å¼€å‘è€…æ¨¡å¼"å¼€å…³
   - ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
   - é€‰æ‹©é¡¹ç›®ä¸­çš„ `.output/chrome-mv3` æ–‡ä»¶å¤¹
   - å®Œæˆ!æ‰©å±•å·²å®‰è£…

### ç¬¬äºŒæ­¥: å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

**é‡è¦**: 
- âœ… è®©è¿™ä¸ªå‘½ä»¤åœ¨åå°è¿è¡Œ(ä¸è¦å…³é—­ç»ˆç«¯)
- âŒ **å¿½ç•¥å®ƒæ‰“å¼€çš„æµè§ˆå™¨çª—å£**(å¯ä»¥å…³é—­å®ƒ)
- âœ… ç»§ç»­ä½¿ç”¨ä½ å¸¸ç”¨çš„ Chrome

### ç¬¬ä¸‰æ­¥: å¼€å§‹å¼€å‘

1. **ç¼–è¾‘ä»£ç ** - åœ¨ `src/` ç›®å½•ä¸­ä¿®æ”¹æ–‡ä»¶
2. **ä¿å­˜** - WXT ä¼šè‡ªåŠ¨é‡æ–°æ„å»º(æŸ¥çœ‹ç»ˆç«¯è¾“å‡º)
3. **åˆ·æ–°** - åœ¨ä½ å¸¸ç”¨çš„ Chrome ä¸­,åœ¨ YouTube é¡µé¢æŒ‰ `Cmd+Shift+R`
4. **æŸ¥çœ‹æ›´æ”¹** - ä½ çš„ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ!

---

## ğŸ’» æ—¥å¸¸å¼€å‘å¾ªç¯

```bash
# 1. å¯åŠ¨ dev æœåŠ¡å™¨(ä¸€æ¬¡,ä¿æŒè¿è¡Œ)
npm run dev

# 2. ç¼–è¾‘ä»£ç 
# åœ¨ VSCode æˆ–ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­ä¿®æ”¹æ–‡ä»¶

# 3. ç­‰å¾…é‡å»º
# ç»ˆç«¯ä¼šæ˜¾ç¤º: âœ” Rebuilt in XXXms

# 4. åˆ·æ–°é¡µé¢
# åœ¨ YouTube é¡µé¢æŒ‰ Cmd+Shift+R

# 5. é‡å¤æ­¥éª¤ 2-4
```

---

## ğŸ”„ ä½•æ—¶éœ€è¦é‡æ–°åŠ è½½æ‰©å±•

å¤§å¤šæ•°æ›´æ”¹**ä¸éœ€è¦**é‡æ–°åŠ è½½æ‰©å±•,åªéœ€åˆ·æ–°é¡µé¢å³å¯ã€‚

**éœ€è¦é‡æ–°åŠ è½½çš„æƒ…å†µ:**
- ä¿®æ”¹äº† `manifest` é…ç½®
- ä¿®æ”¹äº† `background.ts`
- ä¿®æ”¹äº†æ‰©å±•æƒé™

**å¦‚ä½•é‡æ–°åŠ è½½:**
1. å» `chrome://extensions`
2. æ‰¾åˆ° "YouTube CC" æ‰©å±•
3. ç‚¹å‡»åˆ·æ–°æŒ‰é’® ğŸ”„

---

## ğŸ› ï¸ å¯ç”¨å‘½ä»¤

```bash
# å¼€å‘
npm run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨(æ–‡ä»¶ç›‘å¬)
npm run dev:firefox      # Firefox å¼€å‘æ¨¡å¼

# æ„å»º
npm run build            # ç”Ÿäº§æ„å»º
npm run build:firefox    # Firefox æ„å»º
npm run zip              # åˆ›å»ºå‘å¸ƒ ZIP

# ä»£ç è´¨é‡
npm run check            # TypeScript ç±»å‹æ£€æŸ¥
npm run lint             # ä»£ç æ£€æŸ¥
npm run lint:fix         # è‡ªåŠ¨ä¿®å¤ lint é—®é¢˜
npm run format           # æ ¼å¼åŒ–ä»£ç 
npm run format:check     # æ£€æŸ¥ä»£ç æ ¼å¼
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
youtube-cc-ex/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ features/          # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ caption/       # å­—å¹•/è½¬å½•åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ comments/      # è¯„è®ºæœç´¢å’Œä¾§è¾¹æ 
â”‚   â”‚   â”œâ”€â”€ player/        # å®½å±æ¨¡å¼
â”‚   â”‚   â””â”€â”€ ads/           # å¹¿å‘Šç§»é™¤å’Œè·³è¿‡
â”‚   â”œâ”€â”€ shared/            # å…±äº«ä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/    # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/        # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ i18n/          # å›½é™…åŒ–
â”‚   â”œâ”€â”€ entrypoints/       # æ‰©å±•å…¥å£ç‚¹
â”‚   â””â”€â”€ types/             # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ .output/               # æ„å»ºè¾“å‡º
â”‚   â””â”€â”€ chrome-mv3/        # â† åœ¨ Chrome ä¸­åŠ è½½è¿™ä¸ªæ–‡ä»¶å¤¹
â””â”€â”€ DEVELOPMENT.md         # æœ¬æ–‡æ¡£
```

---

## ğŸ› æ•…éšœæ’é™¤

### æ‰©å±•åœ¨ YouTube ä¸Šä¸å·¥ä½œ?

1. **æ£€æŸ¥æ‰©å±•æ˜¯å¦å·²å¯ç”¨**
   - å» `chrome://extensions`
   - ç¡®ä¿ "YouTube CC" å¼€å…³æ˜¯æ‰“å¼€çš„

2. **æ£€æŸ¥æƒé™**
   - ç‚¹å‡»æ‰©å±•å¡ç‰‡ä¸Šçš„"è¯¦ç»†ä¿¡æ¯"
   - ç¡®è®¤"ç½‘ç«™è®¿é—®æƒé™"åŒ…å« YouTube

3. **ç¡¬åˆ·æ–°é¡µé¢**
   - `Cmd+Shift+R` (Mac) æˆ– `Ctrl+Shift+R` (Windows/Linux)

### æ›´æ”¹æ²¡æœ‰ç”Ÿæ•ˆ?

1. **ç¡®è®¤ dev æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ**
   ```bash
   npm run dev
   ```
   ä½ åº”è¯¥çœ‹åˆ°: `âœ” Rebuilt in XXXms`

2. **é‡æ–°åŠ è½½æ‰©å±•**
   - å» `chrome://extensions`
   - ç‚¹å‡»æ‰©å±•çš„åˆ·æ–°æŒ‰é’®

3. **æ¸…é™¤ç¼“å­˜å¹¶ç¡¬åˆ·æ–°**
   - æ‰“å¼€å¼€å‘è€…å·¥å…· (`Cmd+Option+I`)
   - å³é”®ç‚¹å‡»åˆ·æ–°æŒ‰é’®
   - é€‰æ‹©"æ¸…ç©ºç¼“å­˜å¹¶ç¡¬æ€§é‡æ–°åŠ è½½"

### æ„å»ºé”™è¯¯?

1. **æ£€æŸ¥ TypeScript é”™è¯¯**
   ```bash
   npm run check
   ```

2. **æ£€æŸ¥ lint é”™è¯¯**
   ```bash
   npm run lint
   ```

3. **æ¸…ç†å¹¶é‡å»º**
   ```bash
   rm -rf .output node_modules
   npm install
   npm run build
   ```

---

## ğŸ’¡ å¼€å‘æŠ€å·§

### 1. ä½¿ç”¨å¤šä¸ªç»ˆç«¯æ ‡ç­¾

- **æ ‡ç­¾ 1**: `npm run dev` (å¼€å‘æœåŠ¡å™¨,ä¿æŒè¿è¡Œ)
- **æ ‡ç­¾ 2**: `npm run check -- --watch` (ç±»å‹æ£€æŸ¥)
- **æ ‡ç­¾ 3**: git å‘½ä»¤

### 2. è°ƒè¯•

**Background Script:**
```
chrome://extensions â†’ "æ£€æŸ¥è§†å›¾: Service Worker"
```

**Content Script:**
```
åœ¨ YouTube é¡µé¢ â†’ å³é”® â†’ æ£€æŸ¥
```

**Popup:**
```
ç‚¹å‡»æ‰©å±•å›¾æ ‡ â†’ å³é”® â†’ æ£€æŸ¥
```

### 3. å¿«æ·é”®

- `Cmd+Shift+R` - ç¡¬åˆ·æ–°é¡µé¢
- `Cmd+Option+I` - æ‰“å¼€å¼€å‘è€…å·¥å…·
- `Cmd+Option+J` - æ‰“å¼€æ§åˆ¶å°

### 4. æäº¤å‰çš„ä»£ç è´¨é‡æ£€æŸ¥

```bash
npm run format      # æ ¼å¼åŒ–ä»£ç 
npm run lint:fix    # ä¿®å¤ lint é—®é¢˜
npm run check       # éªŒè¯ç±»å‹
```

---

## ğŸ”‘ å…³é”®è¦ç‚¹

1. âœ… **åœ¨å¸¸ç”¨ Chrome ä¸­**åŠ è½½ `.output/chrome-mv3` æ–‡ä»¶å¤¹
2. âœ… è¿è¡Œ `npm run dev` ç›‘å¬æ–‡ä»¶å˜åŒ–
3. âŒ **ä¸è¦ä½¿ç”¨** `npm run dev` æ‰“å¼€çš„æµè§ˆå™¨
4. âœ… åœ¨å¸¸ç”¨ Chrome ä¸­å¼€å‘å’Œæµ‹è¯•
5. âœ… ä¿®æ”¹ä»£ç ååˆ·æ–°é¡µé¢å³å¯çœ‹åˆ°æ›´æ”¹

---

## âœ¨ æ€»ç»“

**ä¸€æ¬¡æ€§è®¾ç½®:**
1. `npm run build`
2. åœ¨å¸¸ç”¨ Chrome ä¸­åŠ è½½ `.output/chrome-mv3`

**æ—¥å¸¸å¼€å‘:**
1. `npm run dev` (ä¿æŒè¿è¡Œ)
2. ç¼–è¾‘ä»£ç 
3. åˆ·æ–° YouTube é¡µé¢

**å°±è¿™ä¹ˆç®€å•!** ğŸš€
