export const messages = {
  en: {
    display_transcription: "Display Transcription",
    search_transcription: "Search Transcription",
    transcription: "Transcription",
    wide_screen: "Wide Screen",
    remove_ad_items: "Clean Interface",
    enlarge_skip_button: "Enlarge Skip Button",
    side_comments: "Side Comments",
    search_comment: "Search Comment",
    transcription_sub: "Interactive sidebar transcript",
    wide_screen_sub: "Maximize immersion automatically",
    remove_ad_items_sub: "Optimize page layout",
    enlarge_skip_button_sub: "Make skip ad button bigger",
    side_comments_sub: "Shift comments to the right",
    search_comment_sub: "Search and filter comments",
    loading_captions:
      "Loading captions... Try toggling YouTube's CC button if captions don't appear.",
    swap_captions: "Swap Primary/Secondary",
    font_size: "Font Size",
  },
  zh_CN: {
    display_transcription: "显示字幕",
    search_transcription: "搜索字幕",
    transcription: "字幕",
    wide_screen: "宽屏",
    remove_ad_items: "界面净化",
    enlarge_skip_button: "放大跳过按钮",
    side_comments: "侧边评论",
    search_comment: "搜索评论",
    transcription_sub: "交互式侧边栏字幕",
    wide_screen_sub: "自动最大化沉浸感",
    remove_ad_items_sub: "优化页面布局显示",
    enlarge_skip_button_sub: "放大跳过广告按钮",
    side_comments_sub: "将评论移至右侧",
    search_comment_sub: "搜索和过滤评论",
    loading_captions:
      "正在加载字幕... 如果字幕未显示,请尝试开关 YouTube 的字幕按钮 (CC)。",
    swap_captions: "交换主/副字幕",
    font_size: "字体大小",
  },
  zh_TW: {
    display_transcription: "顯示字幕",
    search_transcription: "搜尋字幕",
    transcription: "字幕",
    wide_screen: "寬屏",
    remove_ad_items: "介面淨化",
    enlarge_skip_button: "放大跳過按鈕",
    side_comments: "側邊評論",
    search_comment: "搜尋評論",
    transcription_sub: "互動式側邊欄字幕",
    wide_screen_sub: "自動最大化沉浸感",
    remove_ad_items_sub: "優化頁面佈局顯示",
    enlarge_skip_button_sub: "放大跳過廣告按鈕",
    side_comments_sub: "將評論移至右側",
    search_comment_sub: "搜尋和過濾評論",
    loading_captions:
      "正在載入字幕... 如果字幕未顯示,請嘗試開關 YouTube 的字幕按鈕 (CC)。",
    swap_captions: "交換主/副字幕",
    font_size: "字體大小",
  },
  ja: {
    display_transcription: "文字起こしを表示",
    search_transcription: "文字起こしを検索",
    transcription: "文字起こし",
    wide_screen: "ワイドスクリーン",
    remove_ad_items: "インターフェース浄化",
    enlarge_skip_button: "スキップボタン拡大",
    side_comments: "サイドコメント",
    search_comment: "コメントを検索",
    transcription_sub: "インタラクティブなサイドバー文字起こし",
    wide_screen_sub: "没入感を自動的に最大化",
    remove_ad_items_sub: "ページレイアウトを最適化",
    enlarge_skip_button_sub: "広告スキップボタンを大きく",
    side_comments_sub: "コメントを右側に移動",
    search_comment_sub: "コメントの検索とフィルタリング",
    loading_captions:
      "字幕を読み込んでいます... 字幕が表示されない場合は、YouTubeのCCボタンを切り替えてみてください。",
    swap_captions: "主/副字幕の入れ替え",
    font_size: "フォントサイズ",
  },
  ko: {
    display_transcription: "전사 표시",
    search_transcription: "전사 검색",
    transcription: "전사",
    wide_screen: "와이드 스크린",
    remove_ad_items: "인터페이스 정화",
    enlarge_skip_button: "건너뛰기 버튼 확대",
    side_comments: "사이드 댓글",
    search_comment: "댓글 검색",
    transcription_sub: "인터랙티브 사이드바 전사",
    wide_screen_sub: "몰입감 자동 극대화",
    remove_ad_items_sub: "페이지 레이아웃 최적화",
    enlarge_skip_button_sub: "광고 건너뛰기 버튼 크게",
    side_comments_sub: "댓글을 오른쪽으로 이동",
    search_comment_sub: "댓글 검색 및 필터링",
    loading_captions:
      "자막을 불러오는 중... 자막이 표시되지 않으면 YouTube의 CC 버튼을 전환해 보세요.",
    swap_captions: "주/부 자막 교체",
    font_size: "글꼴 크기",
  },
  hi: {
    display_transcription: "ट्रांसक्रिप्शन दिखाएं",
    search_transcription: "ट्रांसक्रिप्शन खोजें",
    transcription: "ट्रांसक्रिप्शन",
    wide_screen: "वाइड स्क्रीन",
    remove_ad_items: "इंटरफ़ेस साफ़ करें",
    enlarge_skip_button: "स्किप बटन बड़ा करें",
    side_comments: "साइड टिप्पणियां",
    search_comment: "टिप्पणी खोजें",
    transcription_sub: "इंटरैक्टिव साइडबार ट्रांसक्रिप्ट",
    wide_screen_sub: "स्वचालित रूप से इमर्शन अधिकतम करें",
    remove_ad_items_sub: "पेज लेआउट अनुकूलित करें",
    enlarge_skip_button_sub: "विज्ञापन स्किप बटन बड़ा करें",
    side_comments_sub: "टिप्पणियों को दाईं ओर शिफ्ट करें",
    search_comment_sub: "टिप्पणियां खोजें और फ़िल्टर करें",
    loading_captions:
      "कैप्शन लोड हो रहे हैं... अगर कैप्शन दिखाई नहीं दे रहे तो YouTube का CC बटन टॉगल करें।",
    swap_captions: "प्राइमरी/सेकेंडरी बदलें",
    font_size: "फ़ॉन्ट साइज़",
  },
  es: {
    display_transcription: "Mostrar Transcripción",
    search_transcription: "Buscar Transcripción",
    transcription: "Transcripción",
    wide_screen: "Pantalla Ancha",
    remove_ad_items: "Limpiar Interfaz",
    enlarge_skip_button: "Agrandar Botón Saltar",
    side_comments: "Comentarios Laterales",
    search_comment: "Buscar Comentario",
    transcription_sub: "Transcripción interactiva en la barra lateral",
    wide_screen_sub: "Maximiza la inmersión automáticamente",
    remove_ad_items_sub: "Optimizar diseño de página",
    enlarge_skip_button_sub: "Agrandar botón de saltar anuncio",
    side_comments_sub: "Mover comentarios a la derecha",
    search_comment_sub: "Buscar y filtrar comentarios",
    loading_captions:
      "Cargando subtítulos... Intenta alternar el botón CC de YouTube si no aparecen.",
    swap_captions: "Intercambiar Primario/Secundario",
    font_size: "Tamaño de Fuente",
  },
  fr: {
    display_transcription: "Afficher la Transcription",
    search_transcription: "Rechercher la Transcription",
    transcription: "Transcription",
    wide_screen: "Écran Large",
    remove_ad_items: "Nettoyer l'Interface",
    enlarge_skip_button: "Agrandir le Bouton Passer",
    side_comments: "Commentaires Latéraux",
    search_comment: "Rechercher un Commentaire",
    transcription_sub: "Transcription interactive dans la barre latérale",
    wide_screen_sub: "Maximise l'immersion automatiquement",
    remove_ad_items_sub: "Optimiser la mise en page",
    enlarge_skip_button_sub: "Agrandir le bouton passer la pub",
    side_comments_sub: "Déplacer les commentaires vers la droite",
    search_comment_sub: "Rechercher et filtrer les commentaires",
    loading_captions:
      "Chargement des sous-titres... Essayez de basculer le bouton CC de YouTube s'ils n'apparaissent pas.",
    swap_captions: "Échanger Primaire/Secondaire",
    font_size: "Taille de Police",
  },
  ar: {
    display_transcription: "عرض النص",
    search_transcription: "البحث في النص",
    transcription: "النص",
    wide_screen: "شاشة عريضة",
    remove_ad_items: "تنظيف الواجهة",
    enlarge_skip_button: "تكبير زر التخطي",
    side_comments: "التعليقات الجانبية",
    search_comment: "البحث في التعليقات",
    transcription_sub: "نص تفاعلي في الشريط الجانبي",
    wide_screen_sub: "تعظيم الانغماس تلقائياً",
    remove_ad_items_sub: "تحسين تخطيط الصفحة",
    enlarge_skip_button_sub: "تكبير زر تخطي الإعلان",
    side_comments_sub: "نقل التعليقات إلى اليمين",
    search_comment_sub: "البحث وتصفية التعليقات",
    loading_captions:
      "جاري تحميل الترجمات... حاول تبديل زر CC في YouTube إذا لم تظهر.",
    swap_captions: "تبديل الأساسي/الثانوي",
    font_size: "حجم الخط",
  },
  bn: {
    display_transcription: "ট্রান্সক্রিপশন দেখান",
    search_transcription: "ট্রান্সক্রিপশন অনুসন্ধান করুন",
    transcription: "ট্রান্সক্রিপশন",
    wide_screen: "ওয়াইড স্ক্রিন",
    remove_ad_items: "ইন্টারফেস পরিষ্কার করুন",
    enlarge_skip_button: "স্কিপ বোতাম বড় করুন",
    side_comments: "সাইড মন্তব্য",
    search_comment: "মন্তব্য অনুসন্ধান করুন",
    transcription_sub: "ইন্টারঅ্যাক্টিভ সাইডবার ট্রান্সক্রিপ্ট",
    wide_screen_sub: "স্বয়ংক্রিয়ভাবে ইমার্শন সর্বাধিক করুন",
    remove_ad_items_sub: "পৃষ্ঠা লেআউট অপ্টিমাইজ করুন",
    enlarge_skip_button_sub: "বিজ্ঞাপন স্কিপ বোতাম বড় করুন",
    side_comments_sub: "মন্তব্য ডানদিকে সরান",
    search_comment_sub: "মন্তব্য অনুসন্ধান এবং ফিল্টার করুন",
    loading_captions:
      "ক্যাপশন লোড হচ্ছে... যদি ক্যাপশন না দেখায় তাহলে YouTube এর CC বোতাম টগল করুন।",
    swap_captions: "প্রাইমারি/সেকেন্ডারি অদলবদল",
    font_size: "ফন্ট সাইজ",
  },
  pt: {
    display_transcription: "Exibir Transcrição",
    search_transcription: "Pesquisar Transcrição",
    transcription: "Transcrição",
    wide_screen: "Tela Ampla",
    remove_ad_items: "Limpar Interface",
    enlarge_skip_button: "Ampliar Botão Pular",
    side_comments: "Comentários Laterais",
    search_comment: "Pesquisar Comentário",
    transcription_sub: "Transcrição interativa na barra lateral",
    wide_screen_sub: "Maximiza a imersão automaticamente",
    remove_ad_items_sub: "Otimizar layout da página",
    enlarge_skip_button_sub: "Ampliar botão de pular anúncio",
    side_comments_sub: "Mover comentários para a direita",
    search_comment_sub: "Pesquisar e filtrar comentários",
    loading_captions:
      "Carregando legendas... Tente alternar o botão CC do YouTube se não aparecerem.",
    swap_captions: "Trocar Primário/Secundário",
    font_size: "Tamanho da Fonte",
  },
  ru: {
    display_transcription: "Показать Транскрипцию",
    search_transcription: "Поиск Транскрипции",
    transcription: "Транскрипция",
    wide_screen: "Широкий Экран",
    remove_ad_items: "Очистить Интерфейс",
    enlarge_skip_button: "Увеличить Кнопку Пропуска",
    side_comments: "Боковые Комментарии",
    search_comment: "Поиск Комментария",
    transcription_sub: "Интерактивная транскрипция на боковой панели",
    wide_screen_sub: "Автоматически максимизирует погружение",
    remove_ad_items_sub: "Оптимизировать макет страницы",
    enlarge_skip_button_sub: "Увеличить кнопку пропуска рекламы",
    side_comments_sub: "Переместить комментарии вправо",
    search_comment_sub: "Поиск и фильтрация комментариев",
    loading_captions:
      "Загрузка субтитров... Попробуйте переключить кнопку CC на YouTube, если они не появляются.",
    swap_captions: "Поменять Основной/Дополнительный",
    font_size: "Размер Шрифта",
  },
};

export const i18n = (
  key: keyof (typeof messages)["en"],
  paramsOrLanguage?: Record<string, string | number> | string,
  language?: string
) => {
  // Handle flexible signature: i18n(key, language?) or i18n(key, params, language?)
  let params: Record<string, string | number> | undefined;
  let lang: string;

  if (typeof paramsOrLanguage === "string") {
    // Called as i18n(key, language)
    params = undefined;
    lang = paramsOrLanguage.replace("-", "_");
  } else {
    // Called as i18n(key, params?, language?)
    params = paramsOrLanguage;
    lang = (language ?? navigator.language).replace("-", "_");
  }

  // Handle zh variants
  if (lang.startsWith("zh")) {
    if (lang.includes("TW") || lang.includes("HK")) {
      lang = "zh_TW";
    } else {
      lang = "zh_CN";
    }
  }

  let message: string;

  // @ts-ignore - Direct match
  if (messages[lang] && messages[lang][key]) {
    // @ts-ignore
    message = messages[lang][key];
  } else {
    // Fallback for sub-languages (e.g., en-GB -> en)
    const baseLang = lang.split("_")[0];
    // @ts-ignore
    if (messages[baseLang] && messages[baseLang][key]) {
      // @ts-ignore
      message = messages[baseLang][key];
    } else {
      message = messages["en"][key];
    }
  }

  // Replace {key} placeholders with params
  if (params) {
    return message.replace(/\{(\w+)\}/g, (_, k) =>
      String(params[k] ?? `{${k}}`)
    );
  }

  return message;
};
